import React from 'react';
import { NavLink } from 'react-router-dom';

import AuthContext from '../context/auth-context';

const MainNavigation = props => {
  return (
    <AuthContext.Consumer>
      {context => (
        <header className="relative mt-4 mb-32">
          <div
            className={
              'flex flex-col' +
              (context.token ? '' : ' items-center mt-24 mb-0')
            }
          >
            <h1 className="title text-4xl font-bold">
              <NavLink
                className="font-bold focus:outline-none focus:shadow-none"
                to="/"
              >
                <svg
                  className={context.token ? 'h-16 ml-8 inline-block' : 'h-32'}
                  viewBox="0 0 142 47"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <circle cx="19.5" cy="22.5" r="19.5" fill="#94E0F9" />
                  <path
                    d="M41.292 31.45C41.292 30.4753 41.5867 28.8207 42.176 26.486C42.7653 24.1287 43.06 22.6893 43.06 22.168C43.06 21.624 42.652 20.91 41.836 20.026L41.87 19.584C43.4113 19.2667 45.44 19.108 47.956 19.108C48.0693 19.4027 48.126 19.9353 48.126 20.706C48.126 21.4767 47.8087 23.12 47.174 25.636C46.5393 28.152 46.222 29.716 46.222 30.328C46.222 30.94 46.4487 31.246 46.902 31.246C47.5593 31.246 48.3187 31.008 49.18 30.532C49.2707 29.988 49.4973 28.9453 49.86 27.404C50.676 23.7773 51.084 21.182 51.084 19.618C51.8773 19.3007 53.3053 19.142 55.368 19.142H56.014C56.014 20.2073 55.6967 22.2927 55.062 25.398C54.4273 28.4807 54.11 30.294 54.11 30.838C54.11 31.3593 54.2233 31.62 54.45 31.62C54.586 31.62 55.232 31.348 56.388 30.804L57.034 31.892C55.0167 33.5693 53.2487 34.408 51.73 34.408C51.0047 34.408 50.3813 34.204 49.86 33.796C49.3613 33.388 49.078 32.8553 49.01 32.198C47.174 33.694 45.508 34.442 44.012 34.442C43.2187 34.442 42.5613 34.1813 42.04 33.66C41.5413 33.1387 41.292 32.402 41.292 31.45ZM68.4928 29.546C68.4928 30.974 67.8581 32.1413 66.5888 33.048C65.3421 33.9547 63.9141 34.408 62.3048 34.408C60.6955 34.408 59.4148 34.068 58.4628 33.388C57.5335 32.708 57.0688 32.1073 57.0688 31.586C57.0688 31.2687 57.4655 30.7587 58.2588 30.056C59.0521 29.3307 59.7208 28.8887 60.2648 28.73C61.3981 29.5687 62.3275 30.8947 63.0528 32.708C63.8915 32.64 64.3108 32.2433 64.3108 31.518C64.3108 30.4753 63.3928 29.002 61.5568 27.098C59.7208 25.1713 58.8028 23.6413 58.8028 22.508C58.8028 21.3747 59.3128 20.502 60.3328 19.89C61.3528 19.2553 62.5768 18.938 64.0048 18.938C65.4555 18.938 66.5435 19.1987 67.2688 19.72C67.9941 20.2187 68.3568 20.91 68.3568 21.794C68.3568 22.6553 67.6655 23.8567 66.2828 25.398C66.4415 25.5567 66.6455 25.772 66.8948 26.044C67.1441 26.2933 67.4728 26.7807 67.8808 27.506C68.2888 28.2313 68.4928 28.9113 68.4928 29.546ZM65.2288 24.208C66.1808 23.392 66.6568 22.5873 66.6568 21.794C66.6568 21.0007 66.1128 20.604 65.0248 20.604C64.5035 20.604 64.0728 20.7173 63.7328 20.944C63.3928 21.148 63.2228 21.386 63.2228 21.658C63.2228 22.1567 63.7215 22.8593 64.7188 23.766L65.2288 24.208ZM80.7147 19.346C80.6694 19.9127 80.4767 20.57 80.1367 21.318C79.2754 21.2273 78.4594 21.182 77.6887 21.182H77.0767C76.0341 26.2367 75.5127 29.3873 75.5127 30.634C75.5127 31.2913 75.6487 31.62 75.9207 31.62C76.2154 31.62 76.9747 31.3367 78.1987 30.77L78.8107 31.892C76.7934 33.5693 74.9234 34.408 73.2007 34.408C72.4074 34.408 71.7501 34.1587 71.2287 33.66C70.7301 33.1613 70.4807 32.504 70.4807 31.688C70.4807 30.8493 70.5714 29.9087 70.7527 28.866C70.9567 27.8233 71.2287 26.554 71.5687 25.058C71.9087 23.5393 72.1581 22.3153 72.3167 21.386C71.4781 21.454 70.8547 21.522 70.4467 21.59C70.4014 21.318 70.3787 20.9553 70.3787 20.502C70.3787 20.026 70.4127 19.6407 70.4807 19.346H72.6227C72.8041 18.122 72.8947 16.966 72.8947 15.878L72.8607 14.824V14.722C74.6287 14.11 76.2947 13.804 77.8587 13.804C77.9494 14.2573 77.9947 14.824 77.9947 15.504C77.9947 16.184 77.8021 17.4647 77.4167 19.346H80.7147ZM83.7041 9.86L95.0601 10.234L98.2561 10.166C98.3241 10.642 98.3581 11.1407 98.3581 11.662C98.3581 12.1833 98.2674 12.5573 98.0861 12.784C97.9047 13.0107 97.5761 13.124 97.1001 13.124C97.0547 13.124 95.4567 12.9767 92.3061 12.682C92.2154 13.702 91.8754 15.4473 91.2861 17.918C90.6967 20.3887 90.1301 23.0293 89.5861 25.84C89.0421 28.6507 88.7587 31.178 88.7361 33.422C87.8521 33.8753 86.0387 34.102 83.2961 34.102H83.0581C83.0581 32.9233 83.7041 29.41 84.9961 23.562C86.2881 17.714 86.9341 14.1553 86.9341 12.886C86.9341 12.7953 86.9114 12.6367 86.8661 12.41H85.5061C83.6474 12.41 82.2194 12.6933 81.2221 13.26C80.7007 12.58 80.3834 11.5827 80.2701 10.268C81.0407 9.996 82.1854 9.86 83.7041 9.86ZM99.4363 34.408C97.8723 34.408 96.6483 33.864 95.7643 32.776C94.8803 31.6653 94.4383 30.124 94.4383 28.152C94.4383 25.636 95.1069 23.4713 96.4443 21.658C97.8043 19.8447 99.6743 18.938 102.054 18.938L103.278 19.006C103.664 18.802 104.094 18.7 104.57 18.7C106.361 18.7 107.256 20.3887 107.256 23.766C108.186 23.7207 109.126 23.596 110.078 23.392L110.622 23.256L110.826 24.582C110.078 24.8993 109.07 25.1827 107.8 25.432L107.12 25.568C106.69 27.948 105.817 30.022 104.502 31.79C103.188 33.5353 101.499 34.408 99.4363 34.408ZM101.272 31.484C102.224 31.484 103.074 30.872 103.822 29.648C104.593 28.424 105.126 27.132 105.42 25.772C102.995 25.772 101.782 24.8653 101.782 23.052C101.782 22.3267 101.93 21.6467 102.224 21.012L102.394 20.672C102.304 20.6267 102.19 20.604 102.054 20.604C101.918 20.604 101.816 20.6267 101.748 20.672C101.182 21.0347 100.649 21.8847 100.15 23.222C99.6516 24.5593 99.4023 26.0893 99.4023 27.812C99.4023 30.26 100.026 31.484 101.272 31.484ZM124.704 31.926C122.778 33.5807 121.078 34.408 119.604 34.408C118.154 34.408 117.315 33.6827 117.088 32.232C116.408 32.912 115.649 33.4447 114.81 33.83C113.972 34.2153 113.235 34.408 112.6 34.408C111.512 34.408 110.583 33.932 109.812 32.98C109.042 32.028 108.656 30.5547 108.656 28.56C108.656 25.568 109.291 23.222 110.56 21.522C111.83 19.7993 113.258 18.938 114.844 18.938C116.454 18.938 117.802 19.3007 118.89 20.026C119.593 16.354 119.944 13.464 119.944 11.356L119.774 9.928C121.474 9.33867 123.14 9.044 124.772 9.044C124.954 9.42933 125.044 9.87133 125.044 10.37C125.044 12.0247 124.546 15.3907 123.548 20.468C122.551 25.5227 122.052 28.9567 122.052 30.77C122.052 31.314 122.177 31.586 122.426 31.586C122.562 31.586 122.993 31.3707 123.718 30.94L124.058 30.736L124.704 31.926ZM116.51 20.944C115.717 20.944 115.026 21.726 114.436 23.29C113.87 24.854 113.586 26.4067 113.586 27.948C113.586 29.4667 113.688 30.4413 113.892 30.872C114.119 31.3027 114.448 31.518 114.878 31.518C115.626 31.518 116.363 31.212 117.088 30.6C117.156 29.6933 117.666 26.6787 118.618 21.556C117.848 21.148 117.145 20.944 116.51 20.944ZM130.415 34.408C128.851 34.408 127.627 33.864 126.743 32.776C125.859 31.6653 125.417 30.124 125.417 28.152C125.417 25.636 126.085 23.4713 127.423 21.658C128.783 19.8447 130.653 18.938 133.033 18.938L134.257 19.006C134.642 18.802 135.073 18.7 135.549 18.7C137.339 18.7 138.235 20.3887 138.235 23.766C139.164 23.7207 140.105 23.596 141.057 23.392L141.601 23.256L141.805 24.582C141.057 24.8993 140.048 25.1827 138.779 25.432L138.099 25.568C137.668 27.948 136.795 30.022 135.481 31.79C134.166 33.5353 132.477 34.408 130.415 34.408ZM132.251 31.484C133.203 31.484 134.053 30.872 134.801 29.648C135.571 28.424 136.104 27.132 136.399 25.772C133.973 25.772 132.761 24.8653 132.761 23.052C132.761 22.3267 132.908 21.6467 133.203 21.012L133.373 20.672C133.282 20.6267 133.169 20.604 133.033 20.604C132.897 20.604 132.795 20.6267 132.727 20.672C132.16 21.0347 131.627 21.8847 131.129 23.222C130.63 24.5593 130.381 26.0893 130.381 27.812C130.381 30.26 131.004 31.484 132.251 31.484Z"
                    fill="#94E0F9"
                  />
                  <path
                    d="M12.5 22.5L21 31L49 3"
                    stroke="white"
                    strokeWidth="6"
                    strokeLinejoin="round"
                  />
                </svg>
              </NavLink>
            </h1>
            {!context.token && (
              <h3 className="text-logoBlue leading-tight tracking-widest ml-20 -mt-4">
                You know what todo,
                <br />
                just start todo it!
              </h3>
            )}
          </div>
          <div className="absolute top-0 right-0 mt-2 mr-8 pt-2 pr-4 group">
            {context.token && (
              <React.Fragment>
                <NavLink className="relative font-bold z-30" to="/preferences">
                  {context.username}
                </NavLink>
                <div className="absolute top-0 right-0 pt-6 pb-2 w-48 border border-blue-200 shadow flex flex-col items-center bg-white z-20 invisible group-hover:visible">
                  <hr className="border border-gray-200 w-11/12" />
                  <button
                    onClick={context.logout}
                    className="btn mode--danger mt-4 mb-2"
                  >
                    Logout
                  </button>
                </div>
              </React.Fragment>
            )}
          </div>
        </header>
      )}
    </AuthContext.Consumer>
  );
};

export default MainNavigation;
